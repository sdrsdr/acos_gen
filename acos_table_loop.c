#include <stdint.h>
extern uint16_t acos_lookup[89];

//cos must be in range 0 to 1.0  inclusive
static inline uint16_t cos2cos_v(float cos) {
	return cos*50000;
}

uint16_t acos_table(uint16_t cos_v) {
	uint16_t a=1; uint16_t *acos_lookup_at=acos_lookup;
	while (a<=89) {
		if (cos_v>=*acos_lookup_at) return a;
		a++;acos_lookup_at++;
	}

	return 90;
}



uint16_t acos_lookup[89]={
49992, // a=1 cos=0.99985
49969, // a=2 cos=0.99939
49931, // a=3 cos=0.99863
49878, // a=4 cos=0.99756
49809, // a=5 cos=0.99619
49726, // a=6 cos=0.99452
49627, // a=7 cos=0.99255
49513, // a=8 cos=0.99027
49384, // a=9 cos=0.98769
49240, // a=10 cos=0.98481
49081, // a=11 cos=0.98163
48907, // a=12 cos=0.97815
48718, // a=13 cos=0.97437
48514, // a=14 cos=0.97030
48296, // a=15 cos=0.96593
48063, // a=16 cos=0.96126
47815, // a=17 cos=0.95630
47552, // a=18 cos=0.95106
47275, // a=19 cos=0.94552
46984, // a=20 cos=0.93969
46679, // a=21 cos=0.93358
46359, // a=22 cos=0.92718
46025, // a=23 cos=0.92050
45677, // a=24 cos=0.91355
45315, // a=25 cos=0.90631
44939, // a=26 cos=0.89879
44550, // a=27 cos=0.89101
44147, // a=28 cos=0.88295
43730, // a=29 cos=0.87462
43301, // a=30 cos=0.86603
42858, // a=31 cos=0.85717
42402, // a=32 cos=0.84805
41933, // a=33 cos=0.83867
41451, // a=34 cos=0.82904
40957, // a=35 cos=0.81915
40450, // a=36 cos=0.80902
39931, // a=37 cos=0.79864
39400, // a=38 cos=0.78801
38857, // a=39 cos=0.77715
38302, // a=40 cos=0.76604
37735, // a=41 cos=0.75471
37157, // a=42 cos=0.74314
36567, // a=43 cos=0.73135
35966, // a=44 cos=0.71934
35355, // a=45 cos=0.70711
34732, // a=46 cos=0.69466
34099, // a=47 cos=0.68200
33456, // a=48 cos=0.66913
32802, // a=49 cos=0.65606
32139, // a=50 cos=0.64279
31466, // a=51 cos=0.62932
30783, // a=52 cos=0.61566
30090, // a=53 cos=0.60182
29389, // a=54 cos=0.58779
28678, // a=55 cos=0.57358
27959, // a=56 cos=0.55919
27231, // a=57 cos=0.54464
26495, // a=58 cos=0.52992
25751, // a=59 cos=0.51504
24999, // a=60 cos=0.50000
24240, // a=61 cos=0.48481
23473, // a=62 cos=0.46947
22699, // a=63 cos=0.45399
21918, // a=64 cos=0.43837
21130, // a=65 cos=0.42262
20336, // a=66 cos=0.40674
19536, // a=67 cos=0.39073
18730, // a=68 cos=0.37461
17918, // a=69 cos=0.35837
17101, // a=70 cos=0.34202
16278, // a=71 cos=0.32557
15450, // a=72 cos=0.30902
14618, // a=73 cos=0.29237
13781, // a=74 cos=0.27564
12940, // a=75 cos=0.25882
12096, // a=76 cos=0.24192
11247, // a=77 cos=0.22495
10395, // a=78 cos=0.20791
9540, // a=79 cos=0.19081
8682, // a=80 cos=0.17365
7821, // a=81 cos=0.15643
6958, // a=82 cos=0.13917
6093, // a=83 cos=0.12187
5226, // a=84 cos=0.10453
4357, // a=85 cos=0.08716
3487, // a=86 cos=0.06976
2616, // a=87 cos=0.05234
1744, // a=88 cos=0.03490
872, // a=89 cos=0.01745
};